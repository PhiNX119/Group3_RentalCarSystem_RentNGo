<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>RentN'Go</title>
    <th:block th:insert="~{fragments/styles.html :: headFragment}"></th:block>
</head>

<body>

<header th:insert="~{fragments/header.html :: header}"></header>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Add car</li>
    </ol>
</nav>

<div class="container-fluid bg-white mt-4">
    <h3 class="profile-header">Add a Car</h3>
    <a class="text-primary" href="">Back</a>
    <div class="row p-4">
        <div class="col-3">
            <button class="btn btn-primary btn-arrow-right btn-block active" id="basicBtn"><a class="text-light"
                                                                                              href="#">Step 1: Basic</a>
            </button>
        </div>
        <div class="col-3">
            <button class="btn btn-secondary btn-arrow-right btn-block" id="detailBtn"><a class="text-light" href="#">Step
                2: Details</a></button>
        </div>
        <div class="col-3">
            <button class="btn btn-secondary btn-arrow-right btn-block" id="pricingBtn"><a class="text-light" href="#">Step
                3: Pricing</a></button>
        </div>
        <div class="col-3">
            <button class="btn btn-secondary btn-arrow-right btn-block" id="finishBtn"><a class="text-light" href="#">Step
                4: Finish</a></button>
        </div>
    </div>
</div>

<div class="container-fluid bg-light mt-4">
    <div class="row justify-content-center p-4">
        <form method="post" th:action="@{/car-owner/add-new-car}" th:object="${carDto}" class="col-md-10" id="carForm"
              role="form" enctype="multipart/form-data">

            <!-- Form Inputs -->
            <div id="step1" class="">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="carName">Car Name:</label>
                                <input type="text" class="form-control" th:field="*{name}" id="carName" name="carName"
                                       oninput="updatePreview()" placeholder="Enter car name">
                                <p th:errors="*{name}" class="text-danger"
                                   th:if="${#fields.hasErrors('name')}"></p>
                            </div>
                            <div class="form-group">
                                <label for="licensePlate">License Plate:</label>
                                <input type="text" class="form-control" th:field="*{licensePlate}" id="licensePlate"
                                       name="licensePlate" placeholder="Enter license plate">
                                <p th:errors="*{licensePlate}" class="text-danger"
                                   th:if="${#fields.hasErrors('licensePlate')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="color">Color:</label>
                                <select class="form-control" id="color" name="color" th:field="*{color}">
                                    <option value="" selected hidden>Select color</option>
                                    <option value="black">Black</option>
                                    <option value="white">White</option>
                                    <option value="gray">Gray</option>
                                    <option value="red">Red</option>
                                    <option value="blue">Blue</option>
                                    <option value="green">Green</option>
                                    <!-- Add more options as needed -->
                                </select>
                                <p th:errors="*{color}" class="text-danger"
                                   th:if="${#fields.hasErrors('color')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="brand">Brand Name:</label>
                                <select class="form-control" id="brand" name="brand" th:field="*{brand}">
                                    <option value="" selected hidden>Select brand</option>
                                    <option value="Porsche">Porsche</option>
                                    <option value="Toyota">Toyota</option>
                                    <option value="Honda">Honda</option>
                                    <option value="Ford">Ford</option>
                                    <!-- Add more options as needed -->
                                </select>
                                <p th:errors="*{brand}" class="text-danger"
                                   th:if="${#fields.hasErrors('brand')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="model">Model:</label>
                                <select class="form-control" id="model" name="model" th:field="*{model}">
                                    <option value="" selected hidden>Select model</option>
                                    <option value="Sedan">Sedan</option>
                                    <option value="Hatchback">Hatchback</option>
                                    <option value="Roadster">Roadster</option>
                                    <option value="SUV">SUV</option>
                                    <option value="Pickup">Pickup</option>
                                    <option value="Micro">Micro</option>
                                    <option value="Supercar">Supercar</option>
                                    <option value="Coupe">Coupe</option>
                                    <option value="Van">Van</option>
                                    <option value="Truck">Truck</option>
                                </select>
                                <p th:errors="*{model}" class="text-danger"
                                   th:if="${#fields.hasErrors('model')}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="productionYear">Production Year:</label>
                                <input type="number" class="form-control" id="productionYear" name="productionYear"
                                       placeholder="Enter production year" th:field="*{productionYear}">
                                <p th:errors="*{productionYear}" class="text-danger"
                                   th:if="${#fields.hasErrors('productionYear')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="seats">Number of Seats:</label>
                                <select class="form-control" id="seats" oninput="updatePreview()" name="seats"
                                        th:field="*{numberOfSeats}">
                                    <!--                                    <option value="">Select number of seats</option>-->
                                    <option value="2">2</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <!-- Add more options as needed -->
                                </select>
                                <p th:errors="*{numberOfSeats}" class="text-danger"
                                   th:if="${#fields.hasErrors('numberOfSeats')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Transmission:</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="transmission" id="automatic"
                                           value="Automatic" th:field="*{transmissionType}">
                                    <label class="form-check-label" for="automatic">Automatic</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="transmission" id="manual"
                                           value="Manual" th:field="*{transmissionType}">
                                    <label class="form-check-label" for="manual">Manual</label>
                                </div>
                                <p th:errors="*{transmissionType}" class="text-danger"
                                   th:if="${#fields.hasErrors('transmissionType')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Fuel:</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="fuel" id="gasoline"
                                           value="Gasoline" th:field="*{fuelType}">
                                    <label class="form-check-label" for="gasoline">Gasoline</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="fuel" id="diesel" value="Diesel"
                                           th:field="*{fuelType}">
                                    <label class="form-check-label" for="diesel">Diesel</label>
                                </div>
                                <p th:errors="*{fuelType}" class="text-danger"
                                   th:if="${#fields.hasErrors('fuelType')}"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Form Title -->
                <h4 class="mb-4">Documentation</h4>

                <!-- File Uploads -->
                <div class="col-md-12 mt-4">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="btn btn-secondary w-75" for="registrationPaper">
                                    <span class="field p-5">Registration Paper</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="registrationPaper" id="registrationPaper" th:field="*{registrationPaper}"
                                           onchange="loadFile(event, 'registrationPaperImage')" hidden>
                                    <img id="registrationPaperImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{registrationPaper}" class="text-danger"
                                   th:if="${#fields.hasErrors('registrationPaper')}"></p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="btn btn-secondary w-100" for="inspectionCertificate">
                                    <span class="field p-5">Certification of Inspection</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="inspectionCertificate" id="inspectionCertificate" th:field="*{certificateOfInspection}"
                                           onchange="loadFile(event, 'inspectionCertificateImage')" hidden>
                                    <img id="inspectionCertificateImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{certificateOfInspection}" class="text-danger"
                                   th:if="${#fields.hasErrors('certificateOfInspection')}"></p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="btn btn-secondary w-75" for="insurance">
                                    <span class="field p-5">Insurance</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="insurance" id="insurance" th:field="*{insurance}"
                                           onchange="loadFile(event, 'insuranceImage')" hidden>
                                    <img id="insuranceImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{insurance}" class="text-danger"
                                   th:if="${#fields.hasErrors('insurance')}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2 - Details (Visible by default) -->
            <div id="step2" class="row">
                <!-- Step 2 Inputs -->
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="mileage">Mileage:</label>
                                <input type="text" class="form-control" id="mileage" name="mileage"
                                       placeholder="Enter mileage" th:field="*{mileage}">
                                <p th:errors="*{mileage}" class="text-danger"
                                   th:if="${#fields.hasErrors('mileage')}"></p>
                            </div>
                            <div class="form-group">
                                <label for="fuelConsumption">Fuel Consumption (L/100km):</label>
                                <input type="text" class="form-control" id="fuelConsumption" name="fuelConsumption"
                                       placeholder="Enter fuel consumption" th:field="*{fuelConsumption}">
                                <p th:errors="*{fuelConsumption}" class="text-danger"
                                   th:if="${#fields.hasErrors('fuelConsumption')}"></p>
                            </div>
                            <div class="form-group">
                                <label for="address">Address:</label>
                                <input type="text" class="form-control" id="address" name="address"
                                       oninput="updatePreview()" placeholder="Enter address">
                            </div>
                            <div class="form-group">
                                <label for="city">City:</label>
                                <select id="city" name="city" class="form-control" th:field="*{city}">
                                    <option value="" selected hidden>City</option>
                                </select>
                                <p th:errors="*{city}" class="text-danger"
                                   th:if="${#fields.hasErrors('city')}"></p>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="district">District:</label>
                                <select id="district" name="district" class="form-control" th:field="*{district}">
                                    <option value="" selected hidden>District</option>
                                </select>
                                <p th:errors="*{district}" class="text-danger"
                                   th:if="${#fields.hasErrors('district')}"></p>
                            </div>
                            <div class="form-group">
                                <label for="ward">Ward:</label>
                                <select id="ward" name="ward" class="form-control" th:field="*{ward}">
                                    <option value="" selected hidden>Ward</option>
                                </select>
                                <p th:errors="*{ward}" class="text-danger"
                                   th:if="${#fields.hasErrors('ward')}"></p>
                            </div>
                            <div class="form-group">
                                <label for="house-number-and-street">House Number:</label>
                                <input type="text" class="form-control" id="house-number-and-street"
                                       name="house-number-and-street"
                                       placeholder="House number, Street" th:field="*{houseNumberAndStreet}">
                                <p th:errors="*{houseNumberAndStreet}" class="text-danger"
                                   th:if="${#fields.hasErrors('houseNumberAndStreet')}"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-4">
                            <!-- Additional Functions Checkbox (First Column) -->
                            <div class="form-group">
                                <label>Additional Functions:</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="bluetooth"
                                           name="additionalFunction" value="Bluetooth"
                                           th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="bluetooth">Bluetooth</label>

                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gps" name="additionalFunction"
                                           value="GPS" th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="gps">GPS</label>

                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="camera"
                                           name="additionalFunction" value="Camera" th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="camera">Camera</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <!-- Additional Functions Checkbox (Second Column) -->
                            <div class="form-group">
                                <label>&nbsp;</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="sunRoof"
                                           name="additionalFunction" value="Sun Roof" th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="sunRoof">Sun Roof</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="childLock"
                                           name="additionalFunction" value="Child Lock"
                                           th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="childLock">Child Lock</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <!-- Additional Functions Checkbox (Third Column) -->
                            <div class="form-group">
                                <label>&nbsp;</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="childSeat"
                                           name="additionalFunction" value="Child Seat"
                                           th:field="*{additionalFunctions}">
                                    <label class="form-check-label" for="childSeat">Child Seat</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="dvd" name="additionalFunction"
                                           th:field="*{additionalFunctions}" value="DVD">
                                    <label class="form-check-label" for="dvd">DVD</label>
                                </div>
                            </div>
                        </div>
                        <p th:errors="*{additionalFunctions}" class="text-danger ml-3"
                           th:if="${#fields.hasErrors('additionalFunctions')}"></p>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="btn btn-secondary w-100" for="front">
                                    <span class="field p-5">Front Image</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="frontImage" id="front" th:field="*{frontImage}"
                                           onchange="loadFile(event, 'frontImage')" hidden>
                                    <img id="frontImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{frontImage}" class="text-danger"
                                   th:if="${#fields.hasErrors('frontImage')}"></p>
                            </div>
                            <div class="form-group">
                                <label class="btn btn-secondary w-100" for="back">
                                    <span class="field p-5">Back Image</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="backImage" id="back" th:field="*{backImage}"
                                           onchange="loadFile(event, 'backImage')" hidden>
                                    <img id="backImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{backImage}" class="text-danger"
                                   th:if="${#fields.hasErrors('backImage')}"></p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="btn btn-secondary w-100" for="left">
                                    <span class="field p-5">Left Image</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="leftImage" id="left" th:field="*{leftImage}"
                                           onchange="loadFile(event, 'leftImage')" hidden>
                                    <img id="leftImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{leftImage}" class="text-danger"
                                   th:if="${#fields.hasErrors('leftImage')}"></p>
                            </div>
                            <div class="form-group">
                                <label class="btn btn-secondary w-100" for="right">
                                    <span class="field p-5">Right Image</span>
                                    <input type="file" accept=".png, .jpg, .jpeg" class="form-control-file"
                                           name="rightImage" id="right" th:field="*{rightImage}"
                                           onchange="loadFile(event, 'rightImage')" hidden>
                                    <img id="rightImage" class="shadow" style="display: none">
                                </label>
                                <p th:errors="*{rightImage}" class="text-danger"
                                   th:if="${#fields.hasErrors('rightImage')}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3 - Pricing and Terms (Hidden by default) -->
            <div id="step3" class="row" style="display: none;">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="basePrice">Base Price per Day (VND):</label>
                        <input type="number" class="form-control" id="basePrice" name="basePrice"
                               oninput="updatePreview()" placeholder="Enter base price" th:field="*{basePrice}">
                        <p th:errors="*{basePrice}" class="text-danger"
                           th:if="${#fields.hasErrors('basePrice')}"></p>
                    </div>
                    <div class="form-group">
                        <label for="requiredDeposit">Required Deposit (VND):</label>
                        <input type="number" class="form-control" id="requiredDeposit" name="requiredDeposit"
                               placeholder="Enter required deposit" th:field="*{deposit}">
                        <p th:errors="*{deposit}" class="text-danger"
                           th:if="${#fields.hasErrors('deposit')}"></p>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Terms of Use:</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="noFood" name="terms" value="No Food"
                                   th:field="*{termOfUse}">
                            <label class="form-check-label" for="noFood">No Food</label>
                        </div>
                        <!-- Add more checkboxes for terms of use -->
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="noSmoking" name="terms"
                                   value="No Smoking" th:field="*{termOfUse}">
                            <label class="form-check-label" for="noSmoking">No Smoking</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="noPet" name="terms" value="No Pet"
                                   th:field="*{termOfUse}">
                            <label class="form-check-label" for="noPet">No Pet</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="other" name="terms" value="Other"
                                   th:field="*{termOfUse}">
                            <label class="form-check-label" for="other">Other</label>
                        </div>

                        <p th:errors="*{termOfUse}" class="text-danger"
                           th:if="${#fields.hasErrors('termOfUse')}"></p>

                    </div>
                    <div class="form-group">
                        <label for="note">Note:</label>
                        <textarea class="form-control" id="note" name="note" rows="3"
                                  placeholder="Please specify any additional notes"
                                  th:field="*{description}"></textarea>
                        <p th:errors="*{description}" class="text-danger"
                           th:if="${#fields.hasErrors('description')}"></p>
                    </div>
                </div>
            </div>

            <!-- Step 4 - Preview (Hidden by default) -->
            <div id="step4" class="row" style="display: none;">
                <div class="col-md-12">
                    <h4>Preview</h4>
                </div>
                <div class="row no-gutters">
                    <div class="col-md-4">
                        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                            <ol class="carousel-indicators">
                                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                            </ol>
                            <!--                            <div class="carousel-inner">-->
                            <!--                                <div class="carousel-item active">-->
                            <!--                                    <img id="previewImage1" src="car-image.jpg" class="card-img" alt="Car Image">-->
                            <!--                                </div>-->
                            <!--                                <div class="carousel-item">-->
                            <!--                                    <img id="previewImage2" src="car-image2.jpg" class="card-img" alt="Car Image 2">-->
                            <!--                                </div>-->
                            <!--                                <div class="carousel-item">-->
                            <!--                                    <img id="previewImage3" src="car-image3.jpg" class="card-img" alt="Car Image 3">-->
                            <!--                                </div>-->
                            <!--                                <div class="carousel-item">-->
                            <!--                                    <img id="previewImage4" src="car-image4.jpg" class="card-img" alt="Car Image 3">-->
                            <!--                                </div>-->
                            <!--                            </div>-->
                            <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                               data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                               data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                    <div class="col-md-6 align-self-center">
                        <div class="card-body">
                            <h5 id="previewCarName" class="card-title">Car Name</h5>
                            <ul class="list-unstyled">
                                <li>Rating:
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                </li>
                                <li>No. of ride: <span id="previewRide"></span></li>
                                <li>Price: <span id="previewPrice"></span>k/day</li>
                                <li>Location: <span id="previewLocation"></span></li>
                                <li>Status: Available</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Buttons -->
            <div class="col-md-12 text-center mt-4">
                <button type="button" id="prevBtn" class="btn btn-secondary mr-2">Previous</button>
                <button type="button" id="nextBtn" class="btn btn-primary">Next</button>
                <button type="submit" id="submitBtn" class="btn btn-primary" style="display: none;">Submit</button>
            </div>

        </form>

    </div>
</div>


<footer th:insert="~{fragments/footer.html :: footer}"></footer>


<script th:src="@{/js/script.js}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>
    let loadFile = function (event, id) {
        let output = document.getElementById(id);
        output.style.display = 'block';
        output.style.width = '250px';
        output.style.borderRadius = '5px';
        output.style.margin = '15px auto';
        output.src = URL.createObjectURL(event.target.files[0]);
        output.onload = function () {
            URL.revokeObjectURL(output.src); // free memory
        }
    };
</script>

<script th:inline="javascript">
    let cities = document.getElementById('city');
    let districts = document.getElementById('district');
    let wards = document.getElementById('ward');
    let Parameter = {
        url: 'https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json',
        method: 'GET',
        responseType: 'application/json',
    };
    let promise = axios(Parameter);
    promise.then(function (result) {
        renderCity(result.data);
    });

    function renderCity(data) {
        // Render options for cities
        for (const x of data) {
            cities.options[cities.options.length] = new Option(x.Name, x.Name);
        }

        // Select city based on value from carDto
        let cityValue = [[${carDto.city}]];
        if (cityValue) {
            cities.value = cityValue;
        }

        // Render districts for selected city
        cities.onchange = function () {
            districts.length = 1;
            wards.length = 1;
            if (this.value != "") {
                const result = data.find(n => n.Name === this.value);
                if (result) {
                    for (const k of result.Districts) {
                        districts.options[districts.options.length] = new Option(k.Name, k.Name);
                    }
                }
            }
        };

        // Select district based on value from carDto
        let districtValue = [[${carDto.district}]];
        if (districtValue) {
            cities.dispatchEvent(new Event('change')); // Trigger change event to render districts
            setTimeout(() => { // Wait for districts to render
                districts.value = districtValue;
                districts.dispatchEvent(new Event('change')); // Trigger change event to render wards
            }, 0);
        }

        // Render wards for selected district
        districts.onchange = function () {
            wards.length = 1;
            const selectedCity = data.find((n) => n.Name === cities.value);
            if (this.value != "") {
                const selectedDistrict = selectedCity.Districts.find(n => n.Name === this.value);
                if (selectedDistrict) {
                    for (const w of selectedDistrict.Wards) {
                        wards.options[wards.options.length] = new Option(w.Name, w.Name);
                    }
                }
            }
        };

        // Select ward based on value from carDto
        let wardValue = [[${carDto.ward}]];
        if (wardValue) {
            cities.dispatchEvent(new Event('change')); // Trigger change event to render districts
            setTimeout(() => { // Wait for districts to render
                districts.dispatchEvent(new Event('change')); // Trigger change event to render wards
                setTimeout(() => { // Wait for wards to render
                    wards.value = wardValue;
                }, 0);
            }, 0);
        }
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const step4 = document.getElementById('step4');
        const basicBtn = document.getElementById('basicBtn');
        const detailBtn = document.getElementById('detailBtn');
        const pricingBtn = document.getElementById('pricingBtn');
        const finishBtn = document.getElementById('finishBtn');
        const submitBtn = document.getElementById('submitBtn');

        // Hide Step 2, Step 3, and Step 4 initially
        step2.style.display = 'none';
        step3.style.display = 'none';
        step4.style.display = 'none';

        // Event listener for Next button - Step 1 to Step 2, Step 2 to Step 3, and Step 3 to Step 4
        nextBtn.addEventListener('click', function () {
            if (step1.style.display !== 'none') {
                step1.style.display = 'none';
                step2.style.display = 'block';
                basicBtn.classList.remove('btn-primary');
                basicBtn.classList.add('btn-secondary');
                basicBtn.classList.remove('active');
                detailBtn.classList.remove('btn-secondary');
                detailBtn.classList.add('btn-primary');
                detailBtn.classList.add('active');
            } else if (step2.style.display !== 'none') {
                step2.style.display = 'none';
                step3.style.display = 'block';
                detailBtn.classList.remove('btn-primary');
                detailBtn.classList.add('btn-secondary');
                detailBtn.classList.remove('active');
                pricingBtn.classList.remove('btn-secondary');
                pricingBtn.classList.add('btn-primary');
                pricingBtn.classList.add('active');
            } else if (step3.style.display !== 'none') {
                step3.style.display = 'none';
                step4.style.display = 'block';
                pricingBtn.classList.remove('btn-primary');
                pricingBtn.classList.add('btn-secondary');
                pricingBtn.classList.remove('active');
                finishBtn.classList.remove('btn-secondary');
                finishBtn.classList.add('btn-primary');
                finishBtn.classList.add('active');
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline-block';
            }
        });

        // Event listener for Previous button - Step 2 to Step 1, Step 3 to Step 2, and Step 4 to Step 3
        prevBtn.addEventListener('click', function () {
            if (step2.style.display !== 'none') {
                step2.style.display = 'none';
                step1.style.display = 'block';
                basicBtn.classList.remove('btn-secondary');
                basicBtn.classList.add('btn-primary');
                basicBtn.classList.add('active');
                detailBtn.classList.remove('btn-primary');
                detailBtn.classList.add('btn-secondary');
                detailBtn.classList.remove('active');
            } else if (step3.style.display !== 'none') {
                step3.style.display = 'none';
                step2.style.display = 'block';
                detailBtn.classList.remove('btn-secondary');
                detailBtn.classList.add('btn-primary');
                detailBtn.classList.add('active');
                pricingBtn.classList.remove('btn-primary');
                pricingBtn.classList.add('btn-secondary');
                pricingBtn.classList.remove('active');
            } else if (step4.style.display !== 'none') {
                step4.style.display = 'none';
                step3.style.display = 'block';
                pricingBtn.classList.remove('btn-secondary');
                pricingBtn.classList.add('btn-primary');
                pricingBtn.classList.add('active');
                finishBtn.classList.remove('btn-primary');
                finishBtn.classList.add('btn-secondary');
                finishBtn.classList.remove('active');
                nextBtn.style.display = 'inline-block';
                submitBtn.style.display = 'none';
            }
        });
    });

    function updatePreview() {
        const carName = document.getElementById("carName").value;
        const ride = document.getElementById("seats").value;
        const price = document.getElementById("basePrice").value;
        const location = document.getElementById("address").value;
        const frontImage = document.getElementById("frontImage").value;
        const backImage = document.getElementById("backImage").value;
        const rightImage = document.getElementById("rightImage").value;
        const leftImage = document.getElementById("leftImage").value;

        document.getElementById("previewImage1").textContent = frontImage;
        document.getElementById("previewImage2").textContent = backImage;
        document.getElementById("previewImage3").textContent = rightImage;
        document.getElementById("previewImage4").textContent = leftImage;
        document.getElementById("previewCarName").textContent = carName;
        document.getElementById("previewRide").textContent = ride;
        document.getElementById("previewPrice").textContent = price;
        document.getElementById("previewLocation").textContent = location;
    }
</script>

</body>
</html>

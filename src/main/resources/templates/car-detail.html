<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Detail</title>
    <link rel="stylesheet" th:href="@{/css/car-detail.css}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<style>
    .checked {
        color: orange;
    }
</style>
<body>
<header th:insert="~{fragments/header.html :: header}"></header>
<!-- start breadcrumb -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Search Results</li>
        <li class="breadcrumb-item active" aria-current="page">Car details</li>
    </ol>
</nav>
<h3 class="ml-5">Car Details</h3>
<div class=" row card-information ">
    <div class="col-md-6 card-image">
        <img src="https://cdn.landesa.org/wp-content/uploads/default-user-image.png">
    </div>
    <div class="col-md-6">
        <h3 th:text="${car.name}"></h3>
        <table class="info-car">
            <tr>
                <td><strong>Ratings:</strong></td>
                <td>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star"></span>
                    <span class="fa fa-star"></span>

                </td>
            </tr>
            <tr>
                <td><strong>No.of rides:</strong></td>
                <td>
                    <strong th:text="${car.numberOfSeats}"></strong>

                </td>
            </tr>
            <tr>
                <td><strong>Price:</strong></td>
                <td>
                    <strong th:text="${car.basePrice}+ '/day'"></strong>

                </td>
            </tr>
            <tr>
                <td><strong>Location:</strong></td>
                <td>
                    <strong th:text="${car.address}"></strong>

                </td>
            </tr>
            <tr>
                <td><strong>Status:</strong></td>
                <td>
                    <strong >Avaliable</strong>

                </td>
            </tr>

        </table>

    </div>

</div>


<div class=" row mt-5 ml-5">
    <button id="infolBtn" style="border-right: none;"><a href="#">Basic information</a></button>
    <button id="detailyBtn" ><a href="#">Details</a></button>
    <button id="termBtn" style="border-right: none;"><a href="#">Term of use</a></button>
</div>
<div class="info-detail row ml-5 mt-4">
    <div class="col-md-6 info-detail-items ">
        <div>
            <strong>License plate: </strong>
            <strong th:text="${car.licensePlate}"></strong>
        </div>
        <div>
            <strong>Brand name:</strong>
            <strong th:text="${car.brand}"></strong>
        </div>
        <div>
            <strong>Production year:</strong>
            <strong th:text="${car.productionYear}"></strong>
        </div>
        <div>
            <strong>Transmission:</strong>
            <strong th:text="${car.transmissionType}"></strong>
        </div>
        <div>
            <strong>Document</strong>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">No</th>
                    <th scope="col">Name</th>
                    <th scope="col">Note</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td >1</td>
                    <td >Registration paper</td>
                    <td id="Registration">Not available</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Certificate of inspection</td>
                    <td id="Certificate">Not available</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Insurance</td>
                    <td id="Insurance">Not available</td>
                </tr>
                </tbody>
            </table>
            <span>Note: Documents will be available for viewing after you've paid the deposit to rent</span>
        </div>
    </div>
    <div class="col-md-6 info-detail-items ">
        <div>
            <strong>Color:</strong>
            <strong th:text="${car.color}"></strong>
        </div>
        <div>
            <strong>Model:</strong>
            <strong th:text="${car.model}"></strong>
        </div>
        <div>
            <strong>No.of seats:</strong>
            <strong th:text="${car.numberOfSeats}"></strong>
        </div>
        <div>
            <strong>Fuel:</strong>
            <strong th:text="${car.fuelType}"></strong>

        </div>
    </div>

</div>

<div class="details  ml-5 mt-4" style="display: none;">
    <strong>Mileage: </strong>
    <strong th:text="${car.mileage}"></strong><br/>
    <strong th:text="'Fuel consumption: '+${car.fuelType} +'liters/100 km'"  >  </strong>
    <br/>
  <strong>Address: </strong>
 <strong th:text="${car.mileage}"></strong><br/>
    <span>Note: Full Address will be available after you've paid the deposit to rent</span><br/>
    <strong>Description: </strong><br/>
    <span th:text="${car.description}">Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat non itaque minima voluptatum eligendi consectetur sint odit! Adipisci vitae fugit doloribus
    sunt, culpa numquam minima ab. Ad rem pariatur architecto?</span><br/>

    <strong>Additional functions: </strong><br/>
    <table class="table">
        <tr>
            <td>Bluetooth</td>
            <td><input type="checkbox"></td>
            <td>Sun Roof</td>
            <td><input type="checkbox"></td>
            <td>DVD</td>
            <td><input type="checkbox"></td>
        </tr>
        <tr>
            <td>GPS</td>
            <td><input type="checkbox"></td>
            <td>Child Lock</td>
            <td><input type="checkbox"></td>
            <td>USB</td>
            <td><input type="checkbox"></td>
        </tr>
        <tr>
            <td>Camera</td>
            <td><input type="checkbox"></td>
            <td>Child Seat</td>
            <td><input type="checkbox"></td>
            <td></td>
            <td></td>
        </tr>
    </table>

</div>

<div class="term ml-5 mt-4" style="display: none;">
    <table class="table">
        <tr>
            <td> <strong >Base price</strong></td>
            <td> <strong th:text="${car.basePrice}">900,000</strong></td>
            <td> <strong>VND/Day</strong></td>
        </tr>
        <tr>
            <td> <strong>Request deposit</strong></td>
            <td> <strong th:text="${car.deposit}" >900,000</strong></td>
            <td> <strong>VND/Day</strong></td>
        </tr>
        <tr>
            <td>
                <strong>Terms of use</strong>
            </td>
        </tr>
        <tr>
            <td> <strong>No Smoking</strong></td>
            <td><input type="checkbox"></td>


            <td> <strong>No Pet</strong></td>
            <td><input type="checkbox"></td>


            <td> <strong>No Food</strong></td>
            <td><input type="checkbox"></td>
            <td> <strong>Other</strong></td>
            <td><input type="checkbox"></td>
        </tr>
    </table>
</div>

<footer th:insert="~{fragments/footer.html :: footer}"></footer>

<script th:inline="javascript">
    let infodetail = document.querySelector(".info-detail");
    let details = document.querySelector(".details");
    let term = document.querySelector(".term");

    let infolBtn = document.getElementById("infolBtn");
    let detailyBtn = document.getElementById("detailyBtn");
    let termBtn = document.getElementById("termBtn");

    infolBtn.addEventListener("click", function() {
        infodetail.style.display = "block";
        details.style.display = "none";
        term.style.display = "none";
    });

    detailyBtn.addEventListener("click", function() {
        infodetail.style.display = "none";
        details.style.display = "block";
        term.style.display = "none";
    });

    termBtn.addEventListener("click", function() {
        infodetail.style.display = "none";
        details.style.display = "none";
        term.style.display = "block";
    });
    document.addEventListener("DOMContentLoaded", function() {
        // Lấy giá trị của carOption từ model.addAttribute("carOption",carOption);
        var carOptionString = [[${carOption}]];
        var carTermString = [[${carTerm}]];
        var carRegistrationPaper = [[${carRegistrationPaper}]];
        var carCertificateOfInspection = [[${carCertificateOfInspection}]];
        var carInsurance = [[${carInsurance}]];
        console.log(carRegistrationPaper,carCertificateOfInspection,carInsurance)
        if(carRegistrationPaper !== null){
            document.getElementById("Registration").innerHTML = "Available";
        }
        if(carCertificateOfInspection !== null){
            document.getElementById("Certificate").innerHTML = "Available";
        }
        if(carInsurance !== null){
            document.getElementById("Insurance").innerHTML = "Available";
        }
        var carOptions = carOptionString.split(",");
        var carTerm = carTermString.split(",");
        console.log(carOptions);
        console.log(carTerm);
        var checkboxes = document.querySelectorAll("input[type='checkbox']");
        checkboxes.forEach(function(checkbox) {
            if (carOptions.includes(checkbox.parentElement.previousElementSibling.textContent.trim())) {
                checkbox.checked = true;
            }
            if (carTerm.includes(checkbox.parentElement.previousElementSibling.textContent.trim())) {
                checkbox.checked = true;
            }
        });
    });

</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
